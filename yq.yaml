Name: yq
Summary: Command-line YAML/XML processor - jq wrapper for YAML/XML documents
# 2.13 needs pyyaml = 5.3.1, SFOS 4.5 has 5.3 at the moment
#Version: 2.13.0
Version: 3.2.3
Release: 0
Group: Applications
License: Apache-2.0
URL: https://pypi.org/project/yq/
Sources:
  - https://files.pythonhosted.org/packages/source/y/%{name}/%{name}-%{version}.tar.gz
Description: |

    yq takes YAML input, converts it to JSON, and pipes it to jq

    %if "%{?vendor}" == "chum"
    Title: yq
    Type: console-application
    Categories:
     - Utility
    Custom:
      PackagingRepo: https://github.com/sailfishos-chum/python3-yq
    Links:
      Homepage: https://pypi.org/project/yq/
      Help: https://pypi.org/project/yq/#description
    %endif

SetupOptions: '-q -n %{name}-%{version}'
BuildArch: noarch
Configure: none
Builder: python3
Macros2:
  - |
      ignore;this
      %generate_buildrequires
      %pyproject_buildrequires
PkgBR:
  # mainly because of pyyaml runtime dep:
  - sailfish-version >= 4.5.0
  - python3-setuptools_scm >= 3.4.3
  - python3-yaml >= 5.3.1
  - pyproject-rpm-macros
PkgConfigBR:
  - python3
NoFiles: true
SubPackages:
    - Name: python3-%{name}
      AsWholeName: true
      Summary: Command-line YAML/XML processor - jq wrapper for YAML/XML documents
      Group: Development/Libraries
      Requires:
        - jq
      Files:
        - '%{_bindir}/tomlq'
        - '%{_bindir}/xq'
        - '%{_bindir}/yq'
        - '%{python3_sitelib}/%{name}-*.egg-info/'
        - '%{python3_sitelib}/%{name}/'
